<div class="wrapper bg-light py-5">
  <div class="container my-5 px-3">
    <div class="row justify-content-center">
      
      <!-- Event Card -->
      <div class="col-lg-8 col-md-10 col-sm-12 bg-white rounded shadow-lg p-5 position-relative mx-auto" style="margin: 20px;">
        
        <!-- Back Button -->
        <div class="position-relative mb-4">
          <button
            type="button"
            class="btn btn-outline-secondary rounded-pill px-3 py-2 shadow-sm"
            routerLink="/all-events"
            aria-label="Back to Events"
          >
            <i class="fas fa-arrow-left me-2"></i> Back
          </button>
        </div>

        <!-- Event Image -->
        <div class="text-center mb-4 position-relative">
          <img
            [src]="event.imageURL"
            class="img-fluid rounded shadow"
            [alt]="event.name"
            style="max-height: 350px; object-fit: cover; width: 100%; border: 3px solid #f8f9fa;"
          />
        </div>

        <!-- Event Name -->
        <h2 class="text-center text-dark fw-bold mb-3">{{ event.name }}</h2>

        <!-- Event Description -->
        <p class="text-muted text-center mb-4 px-3" style="font-size: 1.1rem; line-height: 1.6;">
          {{ event.desc }}
        </p>

        <!-- Event Details -->
        <div class="details-section border-top pt-4">
          <ul class="list-unstyled fs-6">
            <li class="mb-3 d-flex align-items-center">
              <i class="fas fa-tag text-primary me-3 fs-5"></i>
              <strong class="text-secondary">Type:</strong><span class="ms-2">{{ event.type }}</span>
            </li>
            <li class="mb-3 d-flex align-items-center">
              <i class="fas fa-map-marker-alt text-danger me-3 fs-5"></i>
              <strong class="text-secondary">Location:</strong><span class="ms-2">{{ event.location }}</span>
            </li>
            <li class="mb-3 d-flex align-items-center">
              <i class="fas fa-calendar-alt text-success me-3 fs-5"></i>
              <strong class="text-secondary">Date:</strong><span class="ms-2">{{ event.doe }}</span>
            </li>
            <li class="mb-3 d-flex align-items-center">
              <i class="fas fa-user-circle text-info me-3 fs-5"></i>
              <strong class="text-secondary">Organized By:</strong><span class="ms-2">{{ event.organisedBy }}</span>
            </li>
          </ul>
        </div>

        <!-- Action Buttons -->
        <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
          <!-- Conditionally disable or hide based on expiration logic -->
          <!-- Conditionally show Register or Unregister button -->
          <button
            *ngIf="!event?.isRegistered  && role === 'user'"
            type="button"
            class="btn btn-success px-4 py-2 shadow"
            [disabled]="isEventExpired()"
            (click)="onRegisterClicked(event.id)"
          >
            <i class="fas fa-user-plus me-2"></i> Register
          </button>
          <button
            *ngIf="event?.isRegistered && role === 'user'"
            type="button"
            class="btn btn-warning px-4 py-2 text-white shadow"
            [disabled]="isEventExpired()"
            (click)="onUnregisterClicked(event.id)"
          >
            <i class="fas fa-user-minus me-2"></i> Unregister
          </button>
          <button
            type="button"
            class="btn btn-primary px-4 py-2 shadow"
            *ngIf="role === 'eventManager'"
            [disabled]="isEventExpired()"
            (click)="onEditClicked(event.id)"
          >
            <i class="fas fa-edit me-2"></i> Edit
          </button>
          <button
            type="button"
            class="btn btn-danger px-4 py-2 shadow"
            *ngIf="role === 'eventManager'"
            [disabled]="isEventExpired()"
            (click)="onDeleteClicked(event.id)"
          >
            <i class="fas fa-trash me-2"></i> Delete
          </button>
          <!-- <button
            type="button"
            class="btn btn-warning px-4 py-2 text-white shadow"
            [disabled]="isEventExpired()"
            (click)="onUnregisterClicked(event.id)"
          >
            <i class="fas fa-user-minus me-2"></i> Unregister
          </button> -->
        </div>

        <!-- Expired Notice -->
        <div *ngIf="isEventExpired()" class="text-center mt-3 text-danger">
          This event has expired.
        </div>

      </div>
    </div>
  </div>
</div>
